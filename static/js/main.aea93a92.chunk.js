(this["webpackJsonpfri-fmf-timetable"]=this["webpackJsonpfri-fmf-timetable"]||[]).push([[0],{35:function(e,n,t){e.exports=t(92)},40:function(e,n,t){},91:function(e,n,t){},92:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r),a=t(25),c=t.n(a),i=(t(40),t(5)),u=t(1),l=t(2),d=t(26),s=t.n(d),f=t(8),b=t.n(f);t(27);var m=function(e){return("00"+e).slice(-2)},p=function(e,n){var t={monday:[],tuesday:[],wednesday:[],thursday:[],friday:[]},r=["monday","tuesday","wednesday","thursday","friday"],o={};r.forEach((function(e){return o[e]=1}));var a=[];return e.forEach((function(e){-1==a.indexOf(e.predmet.abbr)&&a.push(e.predmet.abbr),t[r[e.dan]].push({id:o[r[e.dan]]++,name:n?e.predmet.abbr:e.predmet.name,professor:e.profesor,class:e.ucilnica,type:e.tip,lectureId:a.indexOf(e.predmet.abbr),startTime:b()("2019-02-23T"+m(e.ura)+":00:00"),endTime:b()("2019-02-23T"+("00"+m(e.ura+e.trajanje)).slice(-2)+":00:00"),hidden:e.hidden,abbr:e.predmet.abbr,dan:e.dan,ura:e.ura})})),t},g=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[8,20],t=[Math.min(n[0],e[0].ura),Math.max(n[1],e[0].ura+e[0].trajanje)];return e.forEach((function(e){e.ura<t[0]&&(t[0]=e.ura),e.ura+e.trajanje>t[1]&&(t[1]=e.ura+e.trajanje)})),t},v=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$";return e.predmet.abbr+n+(-1==e.tip.toUpperCase().indexOf("V")?"P":"V")},h=function(e,n){return!e[v(n)]||e[v(n)].dan===n.dan&&e[v(n)].ura===n.ura},x=function(e,n,t){return e.map((function(e){var r=t&&function(e,n){var t=n.split("$"),r=Object(i.a)(t,2),o=r[0],a=r[1];return o===e.predmet.abbr&&-1!=(e.tip||e.type).indexOf(a)}(e,t)&&(0==(n[t]||[]).length||h(n,e))||!t&&(h(n,e)||!n[v(e)]);return Object.assign(e,{hidden:!r})}))},O=t(28),C={default:{topBar:"#34495e",sideBar:"#46596b",backgroundColor:"white",backgroundAccentColor:"rgba(0,0,0,.08)",tableTextColor:"white",cardTextColor:"white",cardColors:["#e74c3c","#3498db","#9b59b6","#f1c40f","#2ecc71","#1abc9c","#e67e22","#34495e"],cardBackground:"%COLOR%"},horror:{topBar:"red",sideBar:"green",backgroundColor:"yellow",backgroundAccentColor:"gray",tableTextColor:"black",cardTextColor:"black",cardColors:["#fff","#701","#ab2","#aaa","#faf","#222","#deadbe","#dadada"],cardBackground:"%COLOR%"},monokaiPro:{topBar:"#131313",sideBar:"#191919",backgroundColor:"#222222",backgroundAccentColor:"#2c2c2d",tableTextColor:"white",cardTextColor:"white",cardColors:["#ff6188","#fc9868","#ffd866","#a9de77","#78dce8","#ab9df2","#ad5ca3","#34495e"],cardBorder:"2px solid %COLOR%",cardBorderRadius:"3px",cardBackground:"#191919",cardTypeTextColor:"#222222"},monokaiProWithColorText:{importStyle:"monokaiPro",cardTextColor:"%COLOR%"},darkerMode:{topBar:"black",sideBar:"black",backgroundColor:"black",backgroundAccentColor:"black",tableTextColor:"#aaaaaa",cardTextColor:"#aaaaaa",cardColors:[],cardBackground:"black",cardTypeTextColor:"#aaaaaa",cardTypeBackground:"black"}},j=Object.assign(C,JSON.parse(localStorage.getItem("customColorSchemes")||"{}")),k=o.a.createContext(C.default);function y(){var e=Object(u.a)(["\n  background: ",";\n  width: 100vw;\n  position: absolute;\n  left: 0;\n  top: 0;\n\n  height: ",";\n  transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);\n"]);return y=function(){return e},e}function w(){var e=Object(u.a)(["\n  background: ",";\n  width: ",";\n  transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);\n  transition-delay: 0.4s;\n\n  position: absolute;\n  left: 0;\n  top: 0;\n  height: 100vh;\n"]);return w=function(){return e},e}function E(){var e=Object(u.a)(["\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  position: absolute;\n  align-items: center;\n  justify-content: center;\n  background: ",";\n\n  opacity: ",";\n  transition: all 0.6s;\n  transition-delay: 0.8s;\n\n  z-index: 1000;\n\n  pointer-events: none;\n"]);return E=function(){return e},e}var S=l.c.div(E(),(function(e){return e.colors.backgroundColor}),(function(e){return e.loaded?0:1})),T=l.c.div(w(),(function(e){return e.backgroundColor}),(function(e){return e.loaded?"5rem":"100vw"})),B=l.c.div(y(),(function(e){return e.backgroundColor}),(function(e){return e.loaded?"".concat(e.rowHeight,"vh"):"100vh"})),I=function(e){var n=e.loaded,t=e.error,r=e.rowHeight,a=o.a.useContext(k);return o.a.createElement(S,{loaded:n||!!t,colors:a},o.a.createElement(T,{loaded:n,backgroundColor:a.sideBar}),o.a.createElement(B,{loaded:n,rowHeight:r,backgroundColor:a.topBar}),o.a.createElement(O.PuffLoader,null))};function L(){var e=Object(u.a)(["\n  background: #e74c3c;\n  border-radius: 2px;\n  padding: 10px;\n"]);return L=function(){return e},e}function H(){var e=Object(u.a)(["\n  width: 100vw;\n  height: 100vh;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return H=function(){return e},e}var P=l.c.div(H()),_=l.c.div(L()),z=function(e){var n=e.error,t=o.a.useContext(k);return o.a.createElement(P,{background:t.topBar},o.a.createElement(_,null,n))},N=t(31),R=t(32),D=t(34),F=(t(91),o.a.createContext({setLessonFilter:function(){return console.log("context not loaded yet")},setSelecting:function(){return console.log("context not loaded yet")}})),M=o.a.createContext({filter:{},selecting:!1}),A=function(e){var n=e.Component,t=Object(r.useState)(JSON.parse(localStorage.getItem("lessonFilter")||"{}")),a=Object(i.a)(t,2),c=a[0],u=a[1],l=Object(r.useState)(!1),d=Object(i.a)(l,2),s=d[0],f=d[1];return console.log("filter",c),o.a.createElement(M.Provider,{value:{filter:c,selecting:s}},o.a.createElement(F.Provider,{value:{setLessonFilter:function(e){var n=Object.assign({},c,e);localStorage.setItem("lessonFilter",JSON.stringify(n)),u(n)},setSelecting:function(e){f(e)}}},o.a.createElement(n,{lessonFilter:c})))};function J(){var e=Object(u.a)(["\n  .styles_day_title__1y-BE {\n    background: ",";\n  }\n\n  .styles_hour__EXCif {\n    background:",";\n  }\n\n  .styles_day__1cspH {\n    background-color: ",";\n    background-image: linear-gradient("," 50%, transparent 50%);\n  }\n\n  .styles_time_table_wrapper__1-rtp{\n    color:","\n  }\n"]);return J=function(){return e},e}function W(){var e=Object(u.a)(["\n  font-size: 0.6em;\n"]);return W=function(){return e},e}function $(){var e=Object(u.a)(["\n          &:hover {\n            cursor: pointer;\n          }\n          opacity: 1;\n        "]);return $=function(){return e},e}function V(){var e=Object(u.a)(["\n            pointer-events: none;\n            opacity: 0;\n          "]);return V=function(){return e},e}function G(){var e=Object(u.a)(["\n            &:hover {\n              cursor: pointer;\n            }\n\n            opacity: 0.3;\n          "]);return G=function(){return e},e}function U(){var e=Object(u.a)(["\n  //padding:5px;\n  display: flex;\n  position: absolute;\n  box-sizing: border-box;\n  width: 100%;\n\n  transition: opacity 0.5s;\n\n  ","\n"]);return U=function(){return e},e}function X(){var e=Object(u.a)(["\n  height: 100%;\n  width: 20%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  background: ",";\n  position: relative;\n  ","\n"]);return X=function(){return e},e}function q(){var e=Object(u.a)(["\n  height: 100%;\n  width: 80%;\n  padding: 10px;\n"]);return q=function(){return e},e}function K(){var e=Object(u.a)(["\n  width: 100%;\n  background: ",";\n  color: black;\n  display: flex;\n  flex-direction: row;\n  border-radius: ",";\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);\n  text-shadow: -1px 1px 3px rgba(0, 0, 0, 0.3);\n  color: ",";\n  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\n  overflow: hidden;\n\n  border: ",";\n\n  margin: 5px;\n\n  &:hover {\n    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.25), 0 6px 6px rgba(0, 0, 0, 0.22);\n    margin: 3px;\n  }\n"]);return K=function(){return e},e}var Q=function(e,n){return e.replace("%COLOR%",n)},Y=l.c.div(K(),(function(e){return Q(e.colors.cardBackground,e.colors.cardColors[e.lectureId])}),(function(e){return e.colors.cardBorderRadius||"2px"}),(function(e){return Q(e.colors.cardTextColor,e.colors.cardColors[e.lectureId])}),(function(e){return e.colors.cardBorder&&Q(e.colors.cardBorder,e.colors.cardColors[e.lectureId])})),Z=l.c.div(q()),ee=l.c.div(X(),(function(e){var n=e.colors.cardTypeBackground?Q(e.colors.cardTypeBackground,e.colors.cardColors[e.lectureId]):e.colors.cardColors[e.lectureId],t="";if(e.colors.cardTypeBackground)t=n;else try{t=Object(D.a)(n,-10)}catch(r){t=n}return t}),(function(e){return e.colors.cardTypeTextColor?"color:".concat(e.colors.cardTypeTextColor,";"):""})),ne=l.c.div(U(),(function(e){return e.hidden?e.selecting?Object(l.b)(G()):Object(l.b)(V()):Object(l.b)($())})),te=l.c.div(W()),re=Object(l.a)(J(),(function(e){return e.topBar}),(function(e){return e.sideBar}),(function(e){return e.backgroundColor}),(function(e){return e.backgroundAccentColor}),(function(e){return e.tableTextColor})),oe=function(e){var n=e.timeInterval,t=e.tableData,r=o.a.useContext(k),a=o.a.useContext(M),c=o.a.useContext(F);return o.a.createElement(o.a.Fragment,null,o.a.createElement(re,r),o.a.createElement(R.a,{hoursInterval:n,renderEvent:function(e,n,t){return function(e,n,t,r,a,c,u){n.className="";var l=a?a.split("$"):[],d=Object(i.a)(l,2),s=d[0],f=d[1];return o.a.createElement(ne,Object.assign({},n,{title:e.name,key:e.id,selecting:s===e.abbr&&-1!=e.type.indexOf(f),hidden:e.hidden,onClick:function(){if(s===e.abbr&&-1!=e.type.indexOf(f)){var n=Object(N.a)({},a,{dan:e.dan,ura:e.ura});console.log(n),c(n),u(!1)}}}),o.a.createElement(Y,{lectureId:e.lectureId,type:e.type,colors:r},o.a.createElement(Z,null,o.a.createElement("div",{style:{fontWeight:"bold"}},e.name),o.a.createElement(te,null,e.professor),o.a.createElement(te,null,e.class),o.a.createElement(te,null,e.startTime.format("HH:mm")," - ",e.endTime.format("HH:mm"))),o.a.createElement(ee,{type:e.type,lectureId:e.lectureId,colors:r},e.type)))}(e,n,0,r,a.selecting,c.setLessonFilter,c.setSelecting)},events:t}))},ae=t(14);function ce(){var e=Object(u.a)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  border-radius: 0 0 3px 3px;\n"]);return ce=function(){return e},e}function ie(){var e=Object(u.a)(["\n  position: relative;\n  width: 100%;\n  height: ",";\n\n  z-index: 150;\n  overflow: hidden;\n\n  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\n"]);return ie=function(){return e},e}function ue(){var e=Object(u.a)(["\n        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.25),\n          0 6px 6px rgba(0, 0, 0, 0.22);\n      "]);return ue=function(){return e},e}function le(){var e=Object(u.a)(['\n  position: relative;\n  z-index: 150;\n\n  &:before {\n    content: "";\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    z-index: -1;\n    border-radius: 3px;\n    ',"\n  }\n"]);return le=function(){return e},e}function de(){var e=Object(u.a)(["\n  &:hover {\n    cursor: pointer;\n  }\n"]);return de=function(){return e},e}function se(){var e=Object(u.a)(["\n  position: relative;\n  transition: box-shadow 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\n"]);return se=function(){return e},e}var fe=l.c.div(se()),be=l.c.div(de()),me=l.c.div(le(),(function(e){return e.open&&Object(l.b)(ue())})),pe=l.c.div(ie(),(function(e){return e.height})),ge=l.c.div(ce());function ve(e,n){for(;(e=e.parentNode)&&e!==n;);return!!e}var he=function(e){var n=e.ButtonElement,t=e.ListElement,a=e.onSelect,c=e.values,u=e.dropDownInnerListStyle,l=e.onOpen,d=e.style,s=Object(r.useState)(),f=Object(i.a)(s,2),b=f[0],m=f[1],p=Object(r.useRef)(),g=Object(r.useRef)(),v=Object(r.useRef)(),h=function e(n){ve(n.target,p.current)||ve(n.target,g.current)||(m(!1),document.removeEventListener("click",e))};return o.a.createElement(fe,{open:b,onClick:function(e){ve(e.target,p.current)||(b?document.removeEventListener("click",h):(l&&l(),document.addEventListener("click",h)),console.log("new state:",!b),m(!b))},ref:g,style:d},o.a.createElement(me,{open:b},o.a.createElement(be,{open:b},o.a.createElement(n,null)),o.a.createElement(pe,{open:b,marginTop:g.current&&g.current.offsetHeight+"px",ref:p,height:b?v.current&&v.current.offsetHeight+"px":0},o.a.createElement(ge,{ref:v,style:u},c&&c.map((function(e,n){return o.a.createElement(t,{key:n,element:e,open:b,onClick:function(n){return a(e,n)}})}))))))},xe=t(33),Oe=function e(n,t){var r=Object.assign({},t);if(r.importStyle){var o=r.importStyle;if(delete r.importStyle,!(o in j))throw new Error("Error at import, ".concat(n," tried to import ").concat(o));return e(o,r=Object.assign({},j[o],r))}return r},Ce=o.a.createContext({allNames:[],colorSchemeName:"context not loaded",setColorScheme:function(){return console.log("context not loaded")},setColorSchemePreview:function(){return console.log("context not loaded")},resetColorSchemePreview:function(){return console.log("context not loaded")}}),je=function(e){var n,t=e.Component,a=Object(xe.a)(e,["Component"]),c=Object(r.useState)(localStorage.getItem("colorScheme")||"default"),u=Object(i.a)(c,2),l=u[0],d=u[1],s=Object(r.useState)(),f=Object(i.a)(s,2),b=f[0],m=f[1],p=function(){m(null)};return o.a.createElement(k.Provider,{value:(n=b||l,Oe(n,j[n]))},o.a.createElement(Ce.Provider,{value:{allNames:Object.keys(j),colorSchemeName:l,setColorScheme:function(e,n){n&&localStorage.setItem("colorScheme",e),d(e),p()},setColorSchemePreview:function(e){m(e)},resetColorSchemePreview:p}},o.a.createElement(t,Object.assign({setColorSchemeName:function(e){return d(e)}},a))))};function ke(){var e=Object(u.a)(["\n  padding: 1em;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n    cursor: pointer;\n  }\n"]);return ke=function(){return e},e}function ye(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  transition: all 1s;\n\n  height: ","vh;\n  width: 300px;\n  background: ",";\n\n  &:hover {\n    cursor: pointer;\n    background: rgba(255, 255, 255, 0.1);\n  }\n"]);return ye=function(){return e},e}function we(){var e=Object(u.a)(["\n  flex-grow: 0;\n  flex-shrink: 0;\n  height: ","vh;\n  width: 1.5em;\n  z-index: 900;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover {\n    cursor: pointer;\n  }\n"]);return we=function(){return e},e}function Ee(){var e=Object(u.a)(["\n  flex-grow: 1;\n  flex-shrink: 1;\n  display: flex;\n  flex-direction: row;\n  overflow-x: hidden;\n"]);return Ee=function(){return e},e}function Se(){var e=Object(u.a)(["\n  position: absolute;\n  right: 0;\n  top: 0;\n\n  height: ","vh;\n  width: ",";\n\n  background: ",";\n\n  transition: 1s cubic-bezier(0.25, 0.8, 0.25, 1);\n  display: flex;\n  align-items: flex-start;\n  flex-direction: row;\n"]);return Se=function(){return e},e}var Te=l.c.div(Se(),(function(e){return e.rowHeight}),(function(e){return e.expanded?"100vw":"1.5em"}),(function(e){return e.background})),Be=l.c.div(Ee()),Ie=l.c.div(we(),(function(e){return e.rowHeight})),Le=l.c.div(ye(),(function(e){return e.rowHeight}),(function(e){return e.background})),He=l.c.div(ke()),Pe=function(e){var n=e.rowHeight,t=e.duplicateLectures,a=Object(r.useState)(),c=Object(i.a)(a,2),u=c[0],l=c[1],d=o.a.useContext(k),s=o.a.useContext(Ce),f=o.a.useContext(F),b=d.topMenuColor?d.topMenuColor:d.topBar,m=[function(){return o.a.createElement(he,{style:{marginLeft:"1em"},ButtonElement:function(){return o.a.createElement(Le,{background:b,colors:d,rowHeight:n},"Theme: ",s.colorSchemeName||"undefined")},values:s.allNames.map((function(e){return{name:e}})),ListElement:function(e){var n=e.element,t=e.open,r=e.onClick;return o.a.createElement(He,{onClick:r,onMouseEnter:function(){t&&s.setColorSchemePreview(n.name)},onMouseLeave:function(){t&&s.resetColorSchemePreview()}},n.name)},onSelect:function(e){var n=e.name;s.setColorScheme(n,!0)},dropDownInnerListStyle:{background:b}})},function(){return o.a.createElement(he,{style:{marginLeft:"1em"},ButtonElement:function(){return o.a.createElement(Le,{background:b,colors:d,rowHeight:n},"Select class terms")},values:t,ListElement:function(e){var n=e.element,t=e.onClick;return o.a.createElement(He,{onClick:t},n)},onSelect:function(e){f.setSelecting(e)},dropDownInnerListStyle:{background:b}})}].map((function(e){return e()}));return o.a.createElement(Te,{expanded:u,colors:d,rowHeight:n,background:b},o.a.createElement(Ie,{onClick:function(){l(!u)},rowHeight:n},o.a.createElement(ae.a,null)),o.a.createElement(Be,null,m))};function _e(){var e=Object(u.a)(["\n  background: ",";\n  color: white;\n"]);return _e=function(){return e},e}var ze=[{name:"Download",icon:ae.b,onClick:function(){}}],Ne=l.c.div(_e(),(function(e){return e.colors.backgroundColor})),Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[8,20],n=e[1]-e[0]+1;return s()(100/n,5)};var De=function(e){var n=e.lessonFilter,t=Object(r.useState)(),a=Object(i.a)(t,2),c=a[0],u=a[1],l=Object(r.useState)(),d=Object(i.a)(l,2),s=d[0],f=d[1],b=Object(r.useState)(),m=Object(i.a)(b,2),h=m[0],O=m[1],C=Object(r.useState)(),j=Object(i.a)(C,2),y=j[0],w=j[1],E=o.a.useContext(k),S=o.a.useContext(M);Object(r.useEffect)((function(){var e=fetch(-1==window.location.href.indexOf("?url=")?"https://fmf-fri-timetable-scraper.herokuapp.com/":window.location.href.split("?url=")[1].split("&")[0],{method:"GET",mode:"cors",credentials:"same-origin",headers:{"Content-Type":"application/json"},referrerPolicy:"no-referrer"});e.then((function(e){e.ok?e.json().then((function(e){u({tableData:e,timeInterval:g(e)}),w(function(e){var n={};return e.forEach((function(e){var t=v(e);t in n?0===n[t].filter((function(n){return n.dan===e.dan&&n.ura===e.ura})).length&&n[t].push(e):n[t]=[e]})),Object.keys(n).map((function(e){return n[e].length>1?e:0})).filter((function(e){return 0!=e}))}(e))})):(console.error(e),f(e.status+": "+e.statusText))})),e.catch((function(e){f(e.toString())}))}),[]);var T=!!h;if(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=o.a.useRef(!0);Object(r.useEffect)((function(){t.current?t.current=!1:e()}),n)}((function(){console.log(S.selecting);var e=p(x(c.tableData,n,S.selecting));e?O(e):f("data calculation error")}),[n,S.selecting]),c&&!s&&!h){var B=p(function(e,n){return x(e,n,!1)}(c.tableData,n));B?O(B):f("data calculation error")}return o.a.createElement(Ne,{colors:E},o.a.createElement(I,{error:s,loaded:T,rowHeight:Re(c?c.timeInterval:[8,20])}),s&&o.a.createElement(z,{error:s}),c&&o.a.createElement(o.a.Fragment,null,o.a.createElement(oe,{timeInterval:c.timeInterval,tableData:h}),o.a.createElement(Pe,{duplicateLectures:y,rowHeight:Re(c.timeInterval),buttons:ze})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(A,{Component:function(e){return o.a.createElement(je,Object.assign({},e,{Component:De}))}})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.aea93a92.chunk.js.map